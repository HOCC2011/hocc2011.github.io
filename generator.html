<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Client-Side Hex Data Generator</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background-color: #f4f4f9; }
        .container { max-width: 500px; margin: 50px auto; padding: 30px; border: 1px solid #ddd; border-radius: 10px; background-color: white; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
        h2 { text-align: center; color: #333; margin-bottom: 20px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; color: #555; }
        input[type="number"], input[type="text"] { width: 100%; padding: 12px; margin-bottom: 20px; border: 1px solid #ccc; border-radius: 5px; box-sizing: border-box; }
        button { background-color: #007bff; color: white; padding: 14px 20px; border: none; border-radius: 5px; cursor: pointer; width: 100%; font-size: 16px; transition: background-color 0.3s; }
        button:hover { background-color: #0056b3; }
        #message { margin-top: 20px; text-align: center; font-weight: bold; }
    </style>
</head>
<body>
    <div class="container">
        <h2>âœ¨ Random Binary Data Generator</h2>
        
        <label for="lengthInBytes">Data Length (in Bytes, 65536 bytes max):</label>
        <input type="number" id="lengthInBytes" min="1" value="1024" required>

        <label for="fileName">Output File Name:</label>
        <input type="text" id="fileName" value="random_hex.bin" required>
        
        <button onclick="generateAndDownload()">Generate and Download</button>

        <div id="message"></div>
    </div>

    <script>
        /**
         * Generates random bytes, converts them to a Blob, and triggers a download.
         */
        function generateAndDownload() {
            const lengthInBytes = parseInt(document.getElementById('lengthInBytes').value);
            const fileName = document.getElementById('fileName').value;
            const messageElement = document.getElementById('message');

            if (lengthInBytes <= 0 || !fileName) {
                messageElement.textContent = "Please enter a valid length and file name.";
                messageElement.style.color = "red";
                return;
            }

            // 1. Generate Random Bytes
            // window.crypto.getRandomValues provides cryptographically secure random bytes
            const randomBytes = new Uint8Array(lengthInBytes);
            window.crypto.getRandomValues(randomBytes);
            
            // 2. Create a Blob (Binary Large Object) from the bytes
            const blob = new Blob([randomBytes], { type: 'application/octet-stream' });

            // 3. Create a temporary anchor element to initiate the download
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = fileName; // Set the desired file name

            // 4. Programmatically click the anchor element to start download
            document.body.appendChild(a);
            a.click();
            
            // 5. Clean up the temporary elements and URL object
            document.body.removeChild(a);
            URL.revokeObjectURL(url);

            messageElement.textContent = `Successfully generated ${lengthInBytes} bytes. Download should start now.`;
            messageElement.style.color = "green";
        }

        // Optional: Function to show the hex string of the first few bytes (for verification)
        function bytesToHexString(byteArray, limit = 16) {
            return Array.from(byteArray).slice(0, limit)
                .map(byte => byte.toString(16).padStart(2, '0'))
                .join('');
        }
    </script>
</body>
</html>
